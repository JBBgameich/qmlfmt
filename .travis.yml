language: cpp
sudo: required
dist: trusty

compiler:
  - gcc

before_install:
  - sh -c "sudo apt-get install -qq build-essential g++ python-software-properties"
  - sh -c "sudo add-apt-repository ppa:beineri/opt-qt57-trusty -y"
  - sh -c "sudo add-apt-repository ppa:george-edison55/cmake-3.x -y; sudo apt-get update -qq; sudo apt-get install -qq cmake qt-latest -y"

before_script:
  - source /opt/qt57/bin/qt57-env.sh
  - mkdir build
  - cd build
  - cmake ..

script: make

deploy:
  provider: releases
  api-key: 
    secure: "mFWH9fhhMc6Rq6Zky0KVxrP3B3ybidMTh1RECdfyoXm/+QasyxZ6h9HWfBItr0qPcX8+UDoGbxSXPjIzEPkUo34jPvYCqpwv7haSaOu0pfwPlJJKN215tCVHBAKJ8qFR2dwbRU4+UsUWGfzl+4jBh5lLEFAlaCKskmcLLSkvUmI="
  file: qmlfmt
  skip_cleanup: true
  on:
    tags: true
    all_branches: true
